
---

## 城市空间分析技术栈总览



| 技术 / 库       | 层级定位          | 主要解决什么问题 | 典型能力                       | 在你们“功能混合度”里的角色           |
| --------------- | ----------------- | ---------------- | ------------------------------ | ------------------------------------ |
| **Pandas**      | 表格数据层        | 行列数据处理     | groupby / pivot / 比例         | 统计 POI 数、算占比、主导功能        |
| **Shapely**     | 几何内核层        | 单体几何运算     | contains / intersects / buffer | 几何判断（被 GeoPandas 调用）        |
| **GeoPandas**   | 空间数据处理层    | GIS + 表格       | sjoin / CRS / 空间 IO          | 点→面匹配、地块级统计                |
| **H3**          | 空间索引 / 网格层 | 统一空间单元     | hex grid / 邻域                | 后端统一计算单元                     |
| **SciPy**       | 数学统计层        | 指标计算         | entropy / 距离                 | 功能混合度指数                       |
| **PySAL**       | 空间统计层        | 空间模式/检验    | Moran / 热点 / 回归            | 混合度空间分析（可选）               |
| **rasterio**    | 栅格数据处理层    | 栅格读写与变换   | 读写 GeoTIFF / 裁剪 / 重投影   | 连续空间数据底层支撑（人口、灯光等） |
| **rasterstats** | 栅格统计层        | 面对栅格做统计   | zonal statistics               | 地块 / H3 内栅格指标汇总（可选）     |
| **Valhalla**    | 路网分析层        | 可达性 / 出行    | routing / isochrone            | 功能混合度的解释变量                 |
| **OSMnx**       | 路网拓扑层        | 路网获取/构图    | graph / centrality             | 路网结构分析（中心性/连通性）        |
| **NetworkX**    | 图算法层          | 图结构指标       | betweenness / closeness        | 路网结构指标计算                     |



## ArcGIS 计算功能 × Python 库对照总表（城市空间分析）

| ArcGIS 工具箱 / 功能 | ArcGIS 具体工具         | 能做什么       | Python 对应库       | 常用方法 / 模块                                |
| -------------------- | ----------------------- | -------------- | ------------------- | ---------------------------------------------- |
| 数据管理             | Add Data                | 读取空间数据   | GeoPandas           | `read_file()`                                  |
| 数据管理             | Project                 | 坐标系转换     | GeoPandas           | `to_crs()`                                     |
| 数据管理             | Dissolve                | 合并多边形     | GeoPandas           | `dissolve()`                                   |
| 数据管理             | Clip                    | 裁剪要素       | GeoPandas           | `clip()`                                       |
| 数据管理             | Feature to Point        | 面转点         | GeoPandas           | `representative_point()`                       |
| 数据管理             | Join Field              | 表关联         | Pandas / GeoPandas  | `merge()`                                      |
| 空间分析             | Buffer                  | 缓冲区         | GeoPandas / Shapely | `.buffer()`                                    |
| 空间分析             | Intersect               | 几何相交       | GeoPandas           | `overlay()`                                    |
| 空间分析             | Union                   | 几何并集       | GeoPandas           | `overlay(how="union")`                         |
| 空间分析             | Spatial Join            | 点线面空间匹配 | GeoPandas           | `sjoin()`                                      |
| 空间分析             | Near                    | 最近距离       | Shapely / SciPy     | `.distance()` / `cKDTree`                      |
| 空间分析             | Generate Near Table     | 最近设施表     | SciPy / sklearn     | `cKDTree` / `NearestNeighbors`                 |
| 空间分析             | Kernel Density          | 核密度估计     | SciPy / sklearn     | `gaussian_kde` / KDE + 栅格化（rasterio 输出） |
| 分析工具             | Summary Statistics      | 分组统计       | Pandas              | `groupby()`                                    |
| 分析工具             | Pivot Table             | 行列透视       | Pandas              | `pivot_table()`                                |
| 分析工具             | Field Calculator        | 字段计算       | Pandas              | `apply()` / 向量运算                           |
| 空间统计             | Spatial Autocorrelation | Moran’s I      | PySAL               | `esda.Moran`                                   |
| 空间统计             | Hot Spot Analysis       | Gi* 热点       | PySAL               | `esda.G_Local`                                 |
| 空间统计             | Cluster and Outlier     | LISA           | PySAL               | `esda.Moran_Local`                             |
| 空间统计             | Spatial Regression      | 空间回归       | PySAL               | `spreg`                                        |
| 网络分析             | Route                   | 路径规划       | Valhalla            | routing API                                    |
| 网络分析             | Service Area            | 可达区         | Valhalla            | isochrone                                      |
| 网络分析             | OD Cost Matrix          | 起终点成本     | Valhalla            | sources_to_targets                             |
| 网络分析             | Network Analyst（结构指标） | 路网中心性/连通性 | OSMnx / NetworkX | centrality / connectivity                     |
| 栅格分析             | Rasterize               | 矢量转栅格     | rasterio            | `features.rasterize()`                         |
| 栅格分析             | Zonal Statistics        | 区域统计       | rasterstats         | `zonal_stats()`                                |
| 网格分析             | Fishnet                 | 规则矩形网格   | GeoPandas / Shapely | bbox 生成网格 + `overlay()`                    |
| 网格分析             | Create Hexagon Grid     | 六边形网格     | H3                  | `geo_to_cells()` / `polyfill()`                |
| 制图                 | Symbology               | 分级渲染       | GeoPandas           | `.plot()`                                      |

---
